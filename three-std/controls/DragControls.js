!function(){var e,t;e=this,t=function(e,t){"use strict";const n=new t.Plane,o=new t.Raycaster,r=new t.Vector2,i=new t.Vector3,s=new t.Vector3,a=new t.Vector3,c=new t.Matrix4;class l extends t.EventDispatcher{constructor(e,t,l){super(),l.style.touchAction="none";let p=null,d=null;const u=[],f=this;function v(){l.addEventListener("pointermove",m),l.addEventListener("pointerdown",y),l.addEventListener("pointerup",b),l.addEventListener("pointerleave",b)}function h(){l.removeEventListener("pointermove",m),l.removeEventListener("pointerdown",y),l.removeEventListener("pointerup",b),l.removeEventListener("pointerleave",b),l.style.cursor=""}function m(v){if(!1!==f.enabled){if(E(v),o.setFromCamera(r,t),p)return o.ray.intersectPlane(n,s)&&p.position.copy(s.sub(i).applyMatrix4(c)),void f.dispatchEvent({type:"drag",object:p});if("mouse"===v.pointerType||"pen"===v.pointerType)if(u.length=0,o.setFromCamera(r,t),o.intersectObjects(e,!0,u),u.length>0){const e=u[0].object;n.setFromNormalAndCoplanarPoint(t.getWorldDirection(n.normal),a.setFromMatrixPosition(e.matrixWorld)),d!==e&&null!==d&&(f.dispatchEvent({type:"hoveroff",object:d}),l.style.cursor="auto",d=null),d!==e&&(f.dispatchEvent({type:"hoveron",object:e}),l.style.cursor="pointer",d=e)}else null!==d&&(f.dispatchEvent({type:"hoveroff",object:d}),l.style.cursor="auto",d=null)}}function y(d){!1!==f.enabled&&(E(d),u.length=0,o.setFromCamera(r,t),o.intersectObjects(e,!0,u),u.length>0&&(p=!0===f.transformGroup?e[0]:u[0].object,n.setFromNormalAndCoplanarPoint(t.getWorldDirection(n.normal),a.setFromMatrixPosition(p.matrixWorld)),o.ray.intersectPlane(n,s)&&(c.copy(p.parent.matrixWorld).invert(),i.copy(s).sub(a.setFromMatrixPosition(p.matrixWorld))),l.style.cursor="move",f.dispatchEvent({type:"dragstart",object:p})))}function b(){!1!==f.enabled&&(p&&(f.dispatchEvent({type:"dragend",object:p}),p=null),l.style.cursor=d?"pointer":"auto")}function E(e){const t=l.getBoundingClientRect();r.x=(e.clientX-t.left)/t.width*2-1,r.y=-(e.clientY-t.top)/t.height*2+1}v(),this.enabled=!0,this.transformGroup=!1,this.activate=v,this.deactivate=h,this.dispose=function(){h()},this.getObjects=function(){return e},this.getRaycaster=function(){return o}}}e.DragControls=l,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE)}();
