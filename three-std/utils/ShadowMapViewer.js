!function(){var e,t;e=this,t=function(e,t,i){"use strict";e.ShadowMapViewer=class{constructor(e){const n=this,s=void 0!==e.name&&""!==e.name;let o;const h=10,r=10,a=256,d=256,l=new t.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);l.position.set(0,0,2);const p=new t.Scene,w=i.UnpackDepthRGBAShader,c=t.UniformsUtils.clone(w.uniforms),u=new t.ShaderMaterial({uniforms:c,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader}),f=new t.PlaneGeometry(a,d),g=new t.Mesh(f,u);let m,x;if(p.add(g),s){m=document.createElement("canvas");const i=m.getContext("2d");i.font="Bold 20px Arial";const n=i.measureText(e.name).width;m.width=n,m.height=25,i.font="Bold 20px Arial",i.fillStyle="rgba( 255, 0, 0, 1 )",i.fillText(e.name,0,20);const s=new t.Texture(m);s.magFilter=t.LinearFilter,s.minFilter=t.LinearFilter,s.needsUpdate=!0;const o=new t.MeshBasicMaterial({map:s,side:t.DoubleSide});o.transparent=!0;const h=new t.PlaneGeometry(m.width,m.height);x=new t.Mesh(h,o),p.add(x)}this.enabled=!0,this.size={width:a,height:d,set:function(e,t){this.width=e,this.height=t,g.scale.set(this.width/a,this.height/d,1),n.position.set(n.position.x,n.position.y)}},this.position={x:h,y:r,set:function(e,t){this.x=e,this.y=t;const i=n.size.width,o=n.size.height;g.position.set(-window.innerWidth/2+i/2+this.x,window.innerHeight/2-o/2-this.y,0),s&&x.position.set(g.position.x,g.position.y-n.size.height/2+m.height/2,0)}},this.render=function(t){this.enabled&&(c.tDiffuse.value=e.shadow.map.texture,o=t.autoClear,t.autoClear=!1,t.clearDepth(),t.render(p,l),t.autoClear=o)},this.updateForWindowResize=function(){this.enabled&&(l.left=window.innerWidth/-2,l.right=window.innerWidth/2,l.top=window.innerHeight/2,l.bottom=window.innerHeight/-2,l.updateProjectionMatrix(),this.update())},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("../shaders/UnpackDepthRGBAShader.js")):"function"==typeof define&&define.amd?define(["exports","three","../shaders/UnpackDepthRGBAShader"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE,e.THREE)}();
