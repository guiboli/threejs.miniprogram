!function(){var e,t;e=this,t=function(e,t){"use strict";class n extends t.Object3D{constructor(e=document.createElement("div")){super(),this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}n.prototype.isCSS2DObject=!0;const r=new t.Vector3,o=new t.Matrix4,i=new t.Matrix4,s=new t.Vector3,a=new t.Vector3;e.CSS2DObject=n,e.CSS2DRenderer=class{constructor(e={}){const t=this;let n,l,d,c;const u={objects:new WeakMap},p=void 0!==e.element?e.element:document.createElement("div");function m(e,n,o){if(e.isCSS2DObject){r.setFromMatrixPosition(e.matrixWorld),r.applyMatrix4(i);const m=!0===e.visible&&r.z>=-1&&r.z<=1&&!0===e.layers.test(o.layers);if(e.element.style.display=!0===m?"":"none",!0===m){e.onBeforeRender(t,n,o);const i=e.element;/apple/i.test(navigator.vendor)?i.style.transform="translate(-50%,-50%) translate("+Math.round(r.x*d+d)+"px,"+Math.round(-r.y*c+c)+"px)":i.style.transform="translate(-50%,-50%) translate("+(r.x*d+d)+"px,"+(-r.y*c+c)+"px)",i.parentNode!==p&&p.appendChild(i),e.onAfterRender(t,n,o)}const f={distanceToCameraSquared:(l=o,h=e,s.setFromMatrixPosition(l.matrixWorld),a.setFromMatrixPosition(h.matrixWorld),s.distanceToSquared(a))};u.objects.set(e,f)}var l,h;for(let t=0,r=e.children.length;t<r;t++)m(e.children[t],n,o)}p.style.overflow="hidden",this.domElement=p,this.getSize=function(){return{width:n,height:l}},this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),o.copy(t.matrixWorldInverse),i.multiplyMatrices(t.projectionMatrix,o),m(e,e,t),function(e){const t=function(e){const t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:u.objects.get(e).distanceToCameraSquared-u.objects.get(t).distanceToCameraSquared})),n=t.length;for(let e=0,r=t.length;e<r;e++)t[e].element.style.zIndex=n-e}(e)},this.setSize=function(e,t){n=e,l=t,d=n/2,c=l/2,p.style.width=e+"px",p.style.height=t+"px"}}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE)}();
