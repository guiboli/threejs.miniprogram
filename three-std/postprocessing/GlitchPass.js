!function(){var t,e;t=this,e=function(t,e,i,s){"use strict";class a extends i.Pass{constructor(t=64){super(),void 0===s.DigitalGlitch&&console.error("THREE.GlitchPass relies on DigitalGlitch");const a=s.DigitalGlitch;this.uniforms=e.UniformsUtils.clone(a.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.fsQuad=new i.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(t,i,s){!1===t.capabilities.isWebGL2&&(this.uniforms.tDisp.value.format=e.LuminanceFormat),this.uniforms.tDiffuse.value=s.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=e.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=e.MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=e.MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=e.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=e.MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=e.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=e.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=e.MathUtils.randFloat(0,1),this.uniforms.seed_x.value=e.MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=e.MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(i),this.clear&&t.clear(),this.fsQuad.render(t))}generateTrigger(){this.randX=e.MathUtils.randInt(120,240)}generateHeightmap(t){const i=new Float32Array(t*t),s=t*t;for(let t=0;t<s;t++){const s=e.MathUtils.randFloat(0,1);i[t]=s}const a=new e.DataTexture(i,t,t,e.RedFormat,e.FloatType);return a.needsUpdate=!0,a}}t.GlitchPass=a,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three"),require("./Pass.js"),require("../shaders/DigitalGlitch.js")):"function"==typeof define&&define.amd?define(["exports","three","./Pass","../shaders/DigitalGlitch"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).THREE=t["THREE-STD"]||{},t.THREE,t.THREE,t.THREE)}();
