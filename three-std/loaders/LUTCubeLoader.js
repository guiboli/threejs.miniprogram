!function(){var e,t;e=this,t=function(e,t){"use strict";class a extends t.Loader{load(e,a,r,n){const i=new t.FileLoader(this.manager);i.setPath(this.path),i.setResponseType("text"),i.load(e,(t=>{try{a(this.parse(t))}catch(t){n?n(t):console.error(t),this.manager.itemError(e)}}),r,n)}parse(e){e=e.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();let a=null,r=null;const n=new t.Vector3(0,0,0),i=new t.Vector3(1,1,1),s=e.split(/[\n\r]+/g);let o=null,p=0;for(let e=0,t=s.length;e<t;e++){const t=s[e].trim(),l=t.split(/\s/g);switch(l[0]){case"TITLE":a=t.substring(7,t.length-1);break;case"LUT_3D_SIZE":const e=l[1];r=parseFloat(e),o=new Uint8Array(r*r*r*4);break;case"DOMAIN_MIN":n.x=parseFloat(l[1]),n.y=parseFloat(l[2]),n.z=parseFloat(l[3]);break;case"DOMAIN_MAX":i.x=parseFloat(l[1]),i.y=parseFloat(l[2]),i.z=parseFloat(l[3]);break;default:const s=parseFloat(l[0]),d=parseFloat(l[1]),g=parseFloat(l[2]);if(s>1||s<0||d>1||d<0||g>1||g<0)throw new Error("LUTCubeLoader : Non normalized values not supported.");o[p+0]=255*s,o[p+1]=255*d,o[p+2]=255*g,o[p+3]=255,p+=4}}const l=new t.DataTexture;l.image.data=o,l.image.width=r,l.image.height=r*r,l.type=t.UnsignedByteType,l.magFilter=t.LinearFilter,l.minFilter=t.LinearFilter,l.wrapS=t.ClampToEdgeWrapping,l.wrapT=t.ClampToEdgeWrapping,l.generateMipmaps=!1,l.needsUpdate=!0;const d=new t.Data3DTexture;return d.image.data=o,d.image.width=r,d.image.height=r,d.image.depth=r,d.type=t.UnsignedByteType,d.magFilter=t.LinearFilter,d.minFilter=t.LinearFilter,d.wrapS=t.ClampToEdgeWrapping,d.wrapT=t.ClampToEdgeWrapping,d.wrapR=t.ClampToEdgeWrapping,d.generateMipmaps=!1,d.needsUpdate=!0,{title:a,size:r,domainMin:n,domainMax:i,texture:l,texture3D:d}}}e.LUTCubeLoader=a,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE)}();
