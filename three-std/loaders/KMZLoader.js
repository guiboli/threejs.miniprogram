!function(){var e,r;e=this,r=function(e,r,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var a=n(o);class s extends r.Loader{constructor(e){super(e)}load(e,t,o,n){const a=this,s=new r.FileLoader(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,(function(r){try{t(a.parse(r))}catch(r){n?n(r):console.error(r),a.manager.itemError(e)}}),o,n)}parse(e){const o=new r.LoadingManager;o.setURLModifier((function(e){const r=function(e){for(const r in n)if(r.slice(-e.length)===e)return n[r]}(e);if(r){console.log("Loading",e);const t=new Blob([r.buffer],{type:"application/octet-stream"});return URL.createObjectURL(t)}return e}));const n=a.unzipSync(new Uint8Array(e));if(n["doc.kml"]){const e=(new DOMParser).parseFromString(a.strFromU8(n["doc.kml"]),"application/xml").querySelector("Placemark Model Link href");if(e)return new t.ColladaLoader(o).parse(a.strFromU8(n[e.textContent]))}else{console.warn("KMZLoader: Missing doc.kml file.");for(const e in n)if("dae"===e.split(".").pop().toLowerCase())return new t.ColladaLoader(o).parse(a.strFromU8(n[e]))}return console.error("KMZLoader: Couldn't find .dae file."),{scene:new r.Group}}}e.KMZLoader=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("three"),require("./ColladaLoader.js"),require("../libs/fflate.module.js")):"function"==typeof define&&define.amd?define(["exports","three","./ColladaLoader","../libs/fflate.module"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE,e.THREE,e.THREE)}();
