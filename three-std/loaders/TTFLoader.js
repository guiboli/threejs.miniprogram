!function(){var e,t;e=this,t=function(e,t,o){"use strict";class n extends t.Loader{constructor(e){super(e),this.reversed=!1}load(e,o,n,s){const i=this,r=new t.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(t){try{o(i.parse(t))}catch(t){s?s(t):console.error(t),i.manager.itemError(e)}}),n,s)}parse(e){function t(e){const t=[];let o;e.forEach((function(e){"m"===e.type.toLowerCase()?(o=[e],t.push(o)):"z"!==e.type.toLowerCase()&&o.push(e)}));const n=[];return t.forEach((function(e){const t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};n.push(t);for(let t=e.length-1;t>0;t--){const o=e[t],s={type:o.type};void 0!==o.x2&&void 0!==o.y2?(s.x1=o.x2,s.y1=o.y2,s.x2=o.x1,s.y2=o.y1):void 0!==o.x1&&void 0!==o.y1&&(s.x1=o.x1,s.y1=o.y1),s.x=e[t-1].x,s.y=e[t-1].y,n.push(s)}})),n}return void 0===o.opentype?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function(e,o){const n=Math.round,s={},i=1e5/(72*(e.unitsPerEm||2048)),r=e.encoding.cmap.glyphIndexMap,a=Object.keys(r);for(let d=0;d<a.length;d++){const l=a[d],y=e.glyphs.glyphs[r[l]];if(void 0!==l){const e={ha:n(y.advanceWidth*i),x_min:n(y.xMin*i),x_max:n(y.xMax*i),o:""};o&&(y.path.commands=t(y.path.commands)),y.path.commands.forEach((function(t){"c"===t.type.toLowerCase()&&(t.type="b"),e.o+=t.type.toLowerCase()+" ",void 0!==t.x&&void 0!==t.y&&(e.o+=n(t.x*i)+" "+n(t.y*i)+" "),void 0!==t.x1&&void 0!==t.y1&&(e.o+=n(t.x1*i)+" "+n(t.y1*i)+" "),void 0!==t.x2&&void 0!==t.y2&&(e.o+=n(t.x2*i)+" "+n(t.y2*i)+" ")})),s[String.fromCodePoint(y.unicode)]=e}}return{glyphs:s,familyName:e.getEnglishName("fullName"),ascender:n(e.ascender*i),descender:n(e.descender*i),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}(o.opentype.parse(e),this.reversed)}}e.TTFLoader=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("../libs/opentype.module.min.js")):"function"==typeof define&&define.amd?define(["exports","three","../libs/opentype.module.min"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE,e.THREE)}();
