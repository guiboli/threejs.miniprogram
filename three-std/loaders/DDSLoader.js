!function(){var e,t;e=this,t=function(e,t){"use strict";class r extends t.CompressedTextureLoader{constructor(e){super(e)}parse(e,r){const o={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function a(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function n(e,t,r,o){const a=r*o*4,n=new Uint8Array(e,t,a),s=new Uint8Array(a);let i=0,c=0;for(let e=0;e<o;e++)for(let e=0;e<r;e++){const e=n[c];c++;const t=n[c];c++;const r=n[c];c++;const o=n[c];c++,s[i]=r,i++,s[i]=t,i++,s[i]=e,i++,s[i]=o,i++}return s}const s=a("DXT1"),i=a("DXT3"),c=a("DXT5"),m=a("ETC1"),u=new Int32Array(e,0,31);if(542327876!==u[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),o;if(4&!u[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),o;let p;const d=u[21];let f=!1;switch(d){case s:p=8,o.format=t.RGB_S3TC_DXT1_Format;break;case i:p=16,o.format=t.RGBA_S3TC_DXT3_Format;break;case c:p=16,o.format=t.RGBA_S3TC_DXT5_Format;break;case m:p=8,o.format=t.RGB_ETC1_Format;break;default:if(!(32===u[22]&&16711680&u[23]&&65280&u[24]&&255&u[25]&&4278190080&u[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(h=d,String.fromCharCode(255&h,h>>8&255,h>>16&255,h>>24&255))),o;f=!0,p=64,o.format=t.RGBAFormat}var h;o.mipmapCount=1,131072&u[2]&&!1!==r&&(o.mipmapCount=Math.max(1,u[7]));const l=u[28];if(o.isCubemap=!!(512&l),o.isCubemap&&(!(1024&l)||!(2048&l)||!(4096&l)||!(8192&l)||!(16384&l)||!(32768&l)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),o;o.width=u[4],o.height=u[3];let C=u[1]+4;const T=o.isCubemap?6:1;for(let t=0;t<T;t++){let t=o.width,r=o.height;for(let a=0;a<o.mipmapCount;a++){let a,s;f?(a=n(e,C,t,r),s=a.length):(s=Math.max(4,t)/4*Math.max(4,r)/4*p,a=new Uint8Array(e,C,s));const i={data:a,width:t,height:r};o.mipmaps.push(i),C+=s,t=Math.max(t>>1,1),r=Math.max(r>>1,1)}}return o}}e.DDSLoader=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE=e["THREE-STD"]||{},e.THREE)}();
